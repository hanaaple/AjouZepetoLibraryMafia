fileFormatVersion: 2
guid: d4c3eb006f3fa0249b3fee88c799f1a5
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst
    ZEPETO_Character_Controller_1 = require(\\\"ZEPETO.Character.Controller\\\");\\r\\nconst
    ZEPETO_Multiplay_1 = require(\\\"ZEPETO.Multiplay\\\");\\r\\nconst ZEPETO_Script_1
    = require(\\\"ZEPETO.Script\\\");\\r\\nconst ClientStarter_1 = require(\\\"../ClientStarter\\\");\\r\\nconst
    Enum_1 = require(\\\"../Constants/Enum\\\");\\r\\nconst InteractUI_1 = require(\\\"./InteractUI\\\");\\r\\nconst
    PlayerId_1 = require(\\\"./PlayerId\\\");\\r\\nclass MafiaPlayer extends ZEPETO_Script_1.ZepetoScriptBehaviour
    {\\r\\n    Start() {\\r\\n        this.citizenArray = new Array();\\r\\n    }\\r\\n   
    Initialize(uiPrefab, parentCanvas, isLocal, jobState, sessionId, killButton,
    reportButton, missionButton) {\\r\\n        this.isLocal = isLocal;\\r\\n       
    this.playerJobState = jobState;\\r\\n        this.sessionId = sessionId;\\r\\n       
    if (isLocal) {\\r\\n            this.killButton = killButton;\\r\\n           
    this.reportButton = reportButton;\\r\\n            this.missionButton = missionButton;\\r\\n           
    if (jobState == Enum_1.JobState.Citizen) {\\r\\n                this.defaultButton
    = missionButton;\\r\\n            }\\r\\n            else if (jobState == Enum_1.JobState.Mafia)
    {\\r\\n                this.defaultButton = killButton;\\r\\n            }\\r\\n           
    const collider = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.LocalPlayer.zepetoPlayer.character.gameObject.AddComponent($typeof(UnityEngine_1.SphereCollider));\\r\\n           
    collider.isTrigger = true;\\r\\n            collider.center = new UnityEngine_1.Vector3(0,
    0.6, 0);\\r\\n            collider.radius = 2;\\r\\n            this.interactUI
    = UnityEngine_1.GameObject.Instantiate(uiPrefab, parentCanvas).GetComponent($typeof(InteractUI_1.default));\\r\\n           
    this.interactUI.interactButton.gameObject.SetActive(false);\\r\\n           
    ClientStarter_1.default.instance\\r\\n                .GetRoom()\\r\\n               
    .AddMessageHandler(\\\"onKill\\\", (message) => {\\r\\n                const
    mafia = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.GetPlayer(message.mafia);\\r\\n               
    const killed = ZEPETO_Character_Controller_1.ZepetoPlayers.instance.GetPlayer(message.killed);\\r\\n               
    this.citizenArray = this.citizenArray.filter((item) => item != killed.character.GetComponent($typeof(PlayerId_1.default)));\\r\\n               
    if (this.citizenArray.length == 0) {\\r\\n                    this.interactUI.interactButton.gameObject.SetActive(false);\\r\\n               
    }\\r\\n            });\\r\\n        }\\r\\n    }\\r\\n    Report() {\\r\\n       
    console.log(\\\"\uC2E0\uACE0!\\\");\\r\\n        ClientStarter_1.default.instance.Debug(\\\"\uC2E0\uACE0!\\\");\\r\\n       
    const position = this.transform.position;\\r\\n        const nearCorpse = this.citizenArray.filter((item)
    => item.state == Enum_1.InGameInteractState.CORPSE);\\r\\n        const nearPlayer
    = nearCorpse.reduce((prev, cur) => UnityEngine_1.Vector3.Distance(position, prev.transform.position)
    >\\r\\n            UnityEngine_1.Vector3.Distance(position, cur.transform.position)\\r\\n           
    ? cur\\r\\n            : prev);\\r\\n        const roomData = new ZEPETO_Multiplay_1.RoomData();\\r\\n       
    roomData.Add(\\\"reporter\\\", this.sessionId);\\r\\n        roomData.Add(\\\"corpse\\\",
    nearPlayer.sessionId);\\r\\n        ClientStarter_1.default.instance.GetRoom().Send(\\\"onReport\\\",
    roomData.GetObject());\\r\\n        this.interactUI.interactButton.gameObject.SetActive(false);\\r\\n   
    }\\r\\n    OnTriggerEnter(other) {\\r\\n        console.log(other);\\r\\n       
    const player = other.GetComponent($typeof(PlayerId_1.default));\\r\\n       
    console.log(player);\\r\\n        if (!this.isLocal || player.sessionId == this.sessionId)\\r\\n           
    return;\\r\\n        if (player) {\\r\\n            if (player.state == Enum_1.InGameInteractState.ALIVE)
    {\\r\\n                const hasplayer = this.citizenArray.find((item) => {\\r\\n                   
    return item == player;\\r\\n                });\\r\\n                if (!hasplayer)
    {\\r\\n                    this.citizenArray.push(player);\\r\\n                   
    if (this.playerJobState == Enum_1.JobState.Mafia) {\\r\\n                       
    this.interactUI.interactButton.gameObject.SetActive(true);\\r\\n                   
    }\\r\\n                }\\r\\n            }\\r\\n            else if (player.state
    == Enum_1.InGameInteractState.CORPSE) {\\r\\n                const hasplayer
    = this.citizenArray.find((item) => {\\r\\n                    return item ==
    player;\\r\\n                });\\r\\n                if (!hasplayer) {\\r\\n                   
    this.citizenArray.push(player);\\r\\n                    this.interactUI.interactButton.gameObject.SetActive(true);\\r\\n               
    }\\r\\n            }\\r\\n        }\\r\\n        else {\\r\\n        }\\r\\n   
    }\\r\\n    OnTriggerExit(other) {\\r\\n        if (!this.isLocal)\\r\\n           
    return;\\r\\n        const player = other.GetComponent($typeof(PlayerId_1.default));\\r\\n       
    if (player) {\\r\\n            this.citizenArray = this.citizenArray.filter((item)
    => item != player);\\r\\n            if (this.citizenArray.length == 0) {\\r\\n               
    this.interactUI.interactButton.gameObject.SetActive(false);\\r\\n           
    }\\r\\n        }\\r\\n    }\\r\\n}\\r\\nexports.default = MafiaPlayer;\\r\\n//#
    sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFmaWFQbGF5ZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJNYWZpYVBsYXllci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZDQU9xQjtBQUNyQiw2RUFBNEQ7QUFDNUQsdURBQTRDO0FBQzVDLGlEQUFzRDtBQUN0RCxvREFBNkM7QUFDN0MsNENBQWtFO0FBQ2xFLDZDQUFzQztBQUN0Qyx5Q0FBa0M7QUFFbEMsTUFBcUIsV0FBWSxTQUFRLHFDQUFxQjtJQW1CNUQsS0FBSztRQUNILElBQUksQ0FBQyxZQUFZLEdBQUcsSUFBSSxLQUFLLEVBQVksQ0FBQztJQUM1QyxDQUFDO0lBQ00sVUFBVSxDQUNmLFFBQW9CLEVBQ3BCLFlBQXVCLEVBQ3ZCLE9BQWdCLEVBQ2hCLFFBQWtCLEVBQ2xCLFNBQWlCLEVBQ2pCLFVBQWtCLEVBQ2xCLFlBQW9CLEVBQ3BCLGFBQXFCO1FBRXJCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBQ3ZCLElBQUksQ0FBQyxjQUFjLEdBQUcsUUFBUSxDQUFDO1FBQy9CLElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUksT0FBTyxFQUFFO1lBQ1gsSUFBSSxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUM7WUFDN0IsSUFBSSxDQUFDLFlBQVksR0FBRyxZQUFZLENBQUM7WUFDakMsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7WUFFbkMsSUFBSSxRQUFRLElBQUksZUFBUSxDQUFDLE9BQU8sRUFBRTtnQkFDaEMsSUFBSSxDQUFDLGFBQWEsR0FBRyxhQUFhLENBQUM7YUFDcEM7aUJBQU0sSUFBSSxRQUFRLElBQUksZUFBUSxDQUFDLEtBQUssRUFBRTtnQkFDckMsSUFBSSxDQUFDLGFBQWEsR0FBRyxVQUFVLENBQUM7YUFDakM7WUFDRCxNQUFNLFFBQVEsR0FDWiwyQ0FBYSxDQUFDLFFBQVEsQ0FBQyxXQUFXLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsWUFB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\",\"assetPath\":\"Assets/Scripts/Mafia/MafiaPlayer.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"mscorlib\",\"name\":\"sessionId\",\"type\":\"System.String\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]},{\"assembly\":\"\",\"name\":\"playerJobState\",\"type\":\"JobState\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[\"None\",\"Citizen\",\"Mafia\"],\"enumValues\":[\"-2\",\"1\",\"2\"],\"attributes\":[]},{\"assembly\":\"mscorlib\",\"name\":\"isLocal\",\"type\":\"System.Boolean\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]}],\"name\":\"MafiaPlayer\",\"description\":\"\"},\"isCompiled\":true}"
  typescriptHash: e5a598c7e5fc5a3569a3f5af5b6a947b
  onlyWriteTrigger: 0
