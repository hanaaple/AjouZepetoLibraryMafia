fileFormatVersion: 2
guid: 7c0fdf85756252149a5624ef73bdbb97
importerOverride: ZEPETO.Script.Compiler:ZEPETO.Script:TypescriptAssetImporter
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: -1123457745, guid: 54cf806323ffe4418a4ce4cc63fe6b9d, type: 3}
  isAssemblyDeclarations: 0
  assembly: 
  generateAllTypes: 1
  types: []
  generateWrapper: 0
  overrideWrapperTypes: 0
  wrapperTypes: []
  WrapperFilters: []
  wrapperOutputDirectory: Generated
  compiledResult: "{\"source\":\"\\\"use strict\\\";\\r\\nObject.defineProperty(exports,
    \\\"__esModule\\\", { value: true });\\r\\nconst UnityEngine_1 = require(\\\"UnityEngine\\\");\\r\\nconst
    ZEPETO_Character_Controller_1 = require(\\\"ZEPETO.Character.Controller\\\");\\r\\nconst
    ZEPETO_Multiplay_1 = require(\\\"ZEPETO.Multiplay\\\");\\r\\nconst ClientStarter_1
    = require(\\\"../ClientStarter\\\");\\r\\nconst Enum_1 = require(\\\"../Constants/Enum\\\");\\r\\nconst
    MafiaPlayer_1 = require(\\\"./MafiaPlayer\\\");\\r\\nconst PlayerId_1 = require(\\\"./PlayerId\\\");\\r\\nclass
    Mafia extends MafiaPlayer_1.default {\\r\\n    Start() {\\r\\n        super.Start();\\r\\n   
    }\\r\\n    Initialize(uiPrefab, parentCanvas, isLocal, jobState, sessionId, killButton,
    reportButton, workButton) {\\r\\n        super.Initialize(uiPrefab, parentCanvas,
    isLocal, jobState, sessionId, killButton, reportButton, workButton);\\r\\n       
    if (isLocal) {\\r\\n            this.interactUI.interactButton.onClick.AddListener(()
    => {\\r\\n                if (this.interactState == Enum_1.InGameInteractState.ALIVE)
    {\\r\\n                    this.Attack();\\r\\n                }\\r\\n               
    else if (this.interactState == Enum_1.InGameInteractState.CORPSE) {\\r\\n                   
    this.Report();\\r\\n                }\\r\\n            });\\r\\n        }\\r\\n   
    }\\r\\n    Attack() {\\r\\n        console.log(\\\"\uACF5\uACA9!\\\");\\r\\n       
    ClientStarter_1.default.instance.Debug(\\\"\uACF5\uACA9!\\\");\\r\\n        const
    position = this.transform.position;\\r\\n        const nearPlayer = this.citizenArray.reduce((prev,
    cur) => UnityEngine_1.Vector3.Distance(position, prev.transform.position) >\\r\\n           
    UnityEngine_1.Vector3.Distance(position, cur.transform.position)\\r\\n           
    ? cur\\r\\n            : prev);\\r\\n        console.log(ZEPETO_Character_Controller_1.ZepetoPlayers.instance.GetPlayer(nearPlayer.sessionId));\\r\\n       
    const roomData = new ZEPETO_Multiplay_1.RoomData();\\r\\n        roomData.Add(\\\"killed\\\",
    nearPlayer.sessionId);\\r\\n        roomData.Add(\\\"mafia\\\", this.sessionId);\\r\\n       
    ClientStarter_1.default.instance.GetRoom().Send(\\\"onKill\\\", roomData.GetObject());\\r\\n       
    this.citizenArray = this.citizenArray.filter((item) => item != nearPlayer);\\r\\n       
    if (this.citizenArray.length == 0) {\\r\\n            this.interactUI.interactButton.gameObject.SetActive(false);\\r\\n       
    }\\r\\n    }\\r\\n    // \uB3C4\uC911\uC5D0 \uB2E4\uB978 \uB9C8\uD53C\uC544\uAC00
    \uC8FD\uC774\uBA74 array \uC904\uC5EC\uC57C\uB428\\r\\n    Update() {\\r\\n       
    if (this.citizenArray.length == 0) {\\r\\n            return;\\r\\n        }\\r\\n       
    const position = this.transform.position;\\r\\n        const nearPlayer = this.citizenArray.reduce((prev,
    cur) => UnityEngine_1.Vector3.Distance(position, prev.transform.position) >\\r\\n           
    UnityEngine_1.Vector3.Distance(position, cur.transform.position)\\r\\n           
    ? cur\\r\\n            : prev);\\r\\n        this.interactState = nearPlayer.state;\\r\\n       
    if (nearPlayer.state == Enum_1.InGameInteractState.CORPSE) {\\r\\n           
    this.interactUI.interactButton.image.sprite = this.reportButton;\\r\\n       
    }\\r\\n        else if (nearPlayer.state == Enum_1.InGameInteractState.ALIVE)
    {\\r\\n            this.interactUI.interactButton.image.sprite = this.killButton;\\r\\n       
    }\\r\\n    }\\r\\n}\\r\\nexports.default = Mafia;\\r\\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFmaWEuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJNYWZpYS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZDQUFxRTtBQUNyRSw2RUFBNEQ7QUFDNUQsdURBQTRDO0FBQzVDLG9EQUE2QztBQUM3Qyw0Q0FBa0U7QUFDbEUsK0NBQXdDO0FBQ3hDLHlDQUFrQztBQUVsQyxNQUFxQixLQUFNLFNBQVEscUJBQVc7SUFDNUMsS0FBSztRQUNILEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBQ00sVUFBVSxDQUNmLFFBQW9CLEVBQ3BCLFlBQXVCLEVBQ3ZCLE9BQWdCLEVBQ2hCLFFBQWtCLEVBQ2xCLFNBQWlCLEVBQ2pCLFVBQWtCLEVBQ2xCLFlBQW9CLEVBQ3BCLFVBQWtCO1FBRWxCLEtBQUssQ0FBQyxVQUFVLENBQ2QsUUFBUSxFQUNSLFlBQVksRUFDWixPQUFPLEVBQ1AsUUFBUSxFQUNSLFNBQVMsRUFDVCxVQUFVLEVBQ1YsWUFBWSxFQUNaLFVBQVUsQ0FDWCxDQUFDO1FBRUYsSUFBSSxPQUFPLEVBQUU7WUFDWCxJQUFJLENBQUMsVUFBVSxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRTtnQkFDdEQsSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLDBCQUFtQixDQUFDLEtBQUssRUFBRTtvQkFDbkQsSUFBSSxDQUFDLE1BQU0sRUFBRSxDQUFDO2lCQUNmO3FCQUFNLElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSwwQkFBbUIsQ0FBQyxNQUFNLEVBQUU7b0JBQzNELElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQztpQkFDZjtZQUNILENBQUMsQ0FBQyxDQUFDO1NBQ0o7SUFDSCxDQUFDO0lBRU0sTUFBTTtRQUNYLE9BQU8sQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDbkIsdUJBQWEsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLE1BQU0sUUFB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\",\"assetPath\":\"Assets/Scripts/Mafia/Mafia.ts\",\"manifest\":{\"properties\":[{\"assembly\":\"mscorlib\",\"name\":\"sessionId\",\"type\":\"System.String\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]},{\"assembly\":\"\",\"name\":\"playerJobState\",\"type\":\"JobState\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[\"None\",\"Citizen\",\"Mafia\"],\"enumValues\":[\"-2\",\"1\",\"2\"],\"attributes\":[]},{\"assembly\":\"mscorlib\",\"name\":\"isLocal\",\"type\":\"System.Boolean\",\"isArray\":false,\"initValue\":[],\"enumKeys\":[],\"enumValues\":[],\"attributes\":[]}],\"name\":\"Mafia\",\"description\":\"\"},\"isCompiled\":true}"
  typescriptHash: fe06915ccb7d0815c77ee6c0c6d8baee
  onlyWriteTrigger: 0
